{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Quest 3 VR Teleoperation","text":"<p>Welcome to the documentation for the Quest 3 VR Teleoperation project.</p>"},{"location":"#purpose","title":"Purpose","text":"<p>The primary goal of this codebase is to enable real-time, low-latency teleoperation of robots (such as the Franka Panda) using a Meta Quest 3 headset. It streams controller data (pose, buttons, triggers) from the headset to a ROS 2 environment using WebXR.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Full Controller Tracking: Captures 6DoF pose, trigger, grip, thumbstick, and button inputs (A/B/X/Y).</li> <li>WebXR + USB: Uses WebXR for broad compatibility and USB tethering for low-latency (~2-5ms) streaming.</li> <li>AR Passthrough: Allows operators to see their physical surroundings while controlling the robot, enhancing safety and situational awareness.</li> <li>ROS 2 Integration: Seamlessly integrates with the ROS 2 ecosystem by publishing standard <code>PoseStamped</code> and <code>Joy</code> messages.</li> <li>Simulation Support: Ready-to-use integration with:<ul> <li>Isaac Sim: High-fidelity simulation with dynamic calibration.</li> <li>MuJoCo Verification: Lightweight physics simulation for quick verification.</li> </ul> </li> </ul>"},{"location":"#video-tutorial","title":"Video Tutorial","text":""},{"location":"#architecture-overview","title":"Architecture Overview","text":"<p>The system consists of three main components:</p> <ol> <li>WebXR Client (Quest 3): A web application running on the headset that captures XR input data.</li> <li>ROS Bridge (PC): A Python script (<code>webxr_ros_bridge.py</code>) that acts as a WebSocket server, receiving data from the headset and publishing it as ROS 2 topics.</li> <li>Robot Control Node: Nodes that subscribe to the ROS topics to control physical or simulated robots (e.g., <code>isaac_teleop.py</code>).</li> </ol>"},{"location":"installation/","title":"Installation Guide","text":""},{"location":"installation/#prerequisites","title":"Prerequisites","text":"<p>Before setting up the project, ensure you have the following hardware and software:</p>"},{"location":"installation/#hardware","title":"Hardware","text":"<ul> <li>Meta Quest 3 headset.</li> <li>USB-C Data Cable (high quality recommended for low latency).</li> <li>Linux PC (tested on Ubuntu 22.04).</li> </ul>"},{"location":"installation/#software","title":"Software","text":"<ul> <li>ROS 2 Humble: Installation Guide.</li> <li>Python 3.10+.</li> <li>ADB (Android Debug Bridge): For USB communication with the headset.</li> <li>Google Chrome / Edge (on PC for debugging) and Meta Quest Browser (on headset).</li> </ul>"},{"location":"installation/#step-by-step-installation","title":"Step-by-Step Installation","text":""},{"location":"installation/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/AiSaurabhPatil/quest3-streamer.git\ncd quest3-streamer\n</code></pre>"},{"location":"installation/#2-set-up-virtual-environment","title":"2. Set Up Virtual Environment","text":"<p>It is recommended to use <code>uv</code> or <code>venv</code> to manage python dependencies and avoid conflicts with system packages.</p> <pre><code># Using uv (recommended)\nuv venv .venv --python /usr/bin/python3 --system-site-packages\nsource .venv/bin/activate\n\n# OR using standard venv\npython3 -m venv .venv --system-site-packages\nsource .venv/bin/activate\n</code></pre>"},{"location":"installation/#3-install-python-dependencies","title":"3. Install Python Dependencies","text":"<pre><code># Using uv\nuv pip install -r requirements.txt\n\n# OR using pip\npip install -r requirements.txt\n</code></pre>"},{"location":"installation/#4-install-system-dependencies","title":"4. Install System Dependencies","text":"<p>ADB is required for USB communication.</p> <pre><code>sudo apt-get install android-tools-adb\n</code></pre>"},{"location":"installation/#verify-installation","title":"Verify Installation","text":"<p>To check if everything is installed correctly, you can run the MuJoCo simulation test:</p> <pre><code>source .venv/bin/activate\npython mujoco_sim.py\n</code></pre> <p>If a window opens showing a robot arm or a target following your mouse/input (if connected), the environment is set up correctly.</p>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and their solutions.</p>"},{"location":"troubleshooting/#connection-issues","title":"Connection Issues","text":""},{"location":"troubleshooting/#adb-devices-list-is-empty","title":"<code>adb devices</code> list is empty","text":"<ul> <li>Cause: USB cable not connected properly, or USB Debugging not enabled on headset.</li> <li>Solution: <ol> <li>Unplug and replug the USB cable.</li> <li>Put on the headset and look for a \"Allow USB Debugging\" prompt. Select \"Always allow from this computer\".</li> <li>Try a different USB-C cable (ensure it passes data, not just power).</li> </ol> </li> </ul>"},{"location":"troubleshooting/#websocket-disconnected","title":"WebSocket Disconnected","text":"<ul> <li>Symptoms: \"Status: Disconnected\" on the WebXR page.</li> <li>Cause: <code>adb reverse</code> commands not run, or <code>webxr_ros_bridge.py</code> not running.</li> <li>Solution:<ol> <li>Verify <code>webxr_ros_bridge.py</code> is running and printing \"Server listening...\".</li> <li>Re-run the adb port forwarding commands:    <pre><code>adb reverse tcp:8080 tcp:8080\nadb reverse tcp:9090 tcp:9090\n</code></pre></li> <li>Refresh the WebXR page on the headset.</li> </ol> </li> </ul>"},{"location":"troubleshooting/#webxr-issues","title":"WebXR Issues","text":""},{"location":"troubleshooting/#webxr-not-available","title":"\"WebXR Not Available\"","text":"<ul> <li>Cause: Trying to access the page via an IP address (e.g., <code>192.168.1.x</code>) without HTTPS. WebXR requires a Secure Context (HTTPS or localhost).</li> <li>Solution:<ul> <li>Always use <code>http://localhost:8080/...</code> on the headset.</li> <li>Ensure <code>adb reverse</code> is set up so <code>localhost</code> on the headset maps to your PC.</li> </ul> </li> </ul>"},{"location":"troubleshooting/#black-screen-in-ar-passthrough-not-working","title":"Black Screen in AR / Passthrough not working","text":"<ul> <li>Cause: Browser glitch or session state issue.</li> <li>Solution:<ul> <li>Refresh the page.</li> <li>Quit the Meta Quest Browser and restart it.</li> <li>Ensure you clicked \"Allow\" for camera/passthrough permissions.</li> </ul> </li> </ul>"},{"location":"troubleshooting/#simulation-issues","title":"Simulation Issues","text":""},{"location":"troubleshooting/#robot-moves-erratically-or-flies-away","title":"Robot moves erratically or flies away","text":"<ul> <li>Cause: Coordinate frame mismatch or calibration issue.</li> <li>Solution:<ul> <li>Restart the teleop script.</li> <li>Perform the calibration step again (hold hand steady).</li> <li>Ensure you are using the correct units (meters vs millimeters).</li> </ul> </li> </ul>"},{"location":"troubleshooting/#ik-failures-in-isaac-sim","title":"IK Failures in Isaac Sim","text":"<ul> <li>Cause: Target position is out of reach for the robot.</li> <li>Solution:<ul> <li>Bring your hand closer to your body/center of workspace.</li> <li>Check the console for \"Target out of reach\" warnings.</li> </ul> </li> </ul>"},{"location":"usage/","title":"Usage Guide","text":"<p>This guide covers how to start the WebXR streamer, connect it to ROS 2, and run simulations.</p>"},{"location":"usage/#quick-start-webxr-streaming","title":"Quick Start: WebXR Streaming","text":"<p>The recommended way to use this project is via WebXR over a wired USB connection for minimal latency.</p>"},{"location":"usage/#1-establish-usb-connection","title":"1. Establish USB Connection","text":"<ol> <li>Connect your Meta Quest 3 to your Linux PC via USB.</li> <li>Enable USB Debugging on your Quest if you haven't already.</li> <li>On your PC, verify the connection:     <pre><code>adb devices\n</code></pre>     You should see your device ID listed.</li> </ol>"},{"location":"usage/#2-configure-network-proxy","title":"2. Configure Network Proxy","text":"<p>To allow the Quest browser to talk to your PC's local server over USB, set up an <code>adb</code> reverse proxy. You must run this every time you reconnect the USB cable.</p> <pre><code># Proxy HTTP server port\nadb reverse tcp:8080 tcp:8080\n# Proxy WebSocket port (for ROS bridge)\nadb reverse tcp:9090 tcp:9090\n</code></pre>"},{"location":"usage/#3-launch-the-system","title":"3. Launch the System","text":"<p>You will need three terminal tabs.</p> <p>Terminal 1: HTTP Server Host the WebXR application. <pre><code>cd /path/to/quest3-streamer\npython -m http.server 8080\n</code></pre></p> <p>Terminal 2: ROS Bridge Start the bridge that receives data from the headset and publishes ROS topics. <pre><code>source /opt/ros/humble/setup.bash\nsource .venv/bin/activate\npython webxr_ros_bridge.py\n</code></pre></p> <p>Terminal 3: Verification Check if topics are being published. <pre><code>source /opt/ros/humble/setup.bash\nros2 topic echo /quest/right_hand/pose\n</code></pre></p>"},{"location":"usage/#4-start-the-application-on-headset","title":"4. Start the Application on Headset","text":"<ol> <li>Put on your Quest 3 headset.</li> <li>Open Meta Quest Browser.</li> <li>Navigate to <code>http://localhost:8080/webxr_streamer.html</code>.</li> <li>Ensure the settings are:<ul> <li>PC Server IP: <code>localhost</code></li> <li>Port: <code>9090</code></li> </ul> </li> <li>Click \"Start AR Session\".</li> <li>\"Allow\" any permission prompts for WebXR or Passthrough.</li> </ol> <p>You should now see the passthrough view, and data should be streaming to your PC.</p>"},{"location":"usage/#running-simulations","title":"Running Simulations","text":""},{"location":"usage/#mujoco-verification","title":"MuJoCo Verification","text":"<p>A lightweight simulation to verify coordinate mapping and tracking accuracy.</p> <p><pre><code>source .venv/bin/activate\npython mujoco_sim.py\n</code></pre> A green target should appear and follow your right hand's movement.</p>"},{"location":"usage/#isaac-sim-teleoperation","title":"Isaac Sim Teleoperation","text":"<p>Control a Franka Panda robot in NVIDIA Isaac Sim.</p> <ol> <li> <p>Launch Isaac Sim Teleop:     <pre><code>./run_isaac_teleop.sh\n</code></pre> Note: Do not source your system ROS setup before running this script if it conflicts with Isaac Sim's internal ROS.</p> </li> <li> <p>Calibration:</p> <ul> <li>Sit or stand in a comfortable position.</li> <li>Hold your hand steady for ~1 second to trigger the dynamic calibration.</li> <li>The robot end-effector will snap to your hand position.</li> </ul> </li> <li> <p>Controls:</p> <ul> <li>Move Hand: Moves the robot end-effector.</li> <li>Trigger/Grip: Closes the gripper.</li> </ul> </li> </ol>"},{"location":"usage/#ros-topics-reference","title":"ROS Topics Reference","text":"Topic Type Description <code>/quest/left_hand/pose</code> <code>geometry_msgs/PoseStamped</code> Position and Orientation of left controller. <code>/quest/right_hand/pose</code> <code>geometry_msgs/PoseStamped</code> Position and Orientation of right controller. <code>/quest/left_hand/inputs</code> <code>sensor_msgs/Joy</code> Button and axis states for left controller. <code>/quest/right_hand/inputs</code> <code>sensor_msgs/Joy</code> Button and axis states for right controller."},{"location":"usage/#joy-message-mapping","title":"Joy Message Mapping","text":"<ul> <li><code>axes[0]</code>: Trigger (float 0.0 - 1.0)</li> <li><code>axes[1]</code>: Squeeze/Grip (float 0.0 - 1.0)</li> <li><code>axes[2]</code>: Thumbstick X</li> <li><code>axes[3]</code>: Thumbstick Y</li> <li><code>buttons[0]</code>: A / X Button</li> <li><code>buttons[1]</code>: B / Y Button</li> <li><code>buttons[2]</code>: Menu Button</li> <li><code>buttons[3]</code>: Thumbstick Click</li> </ul>"}]}